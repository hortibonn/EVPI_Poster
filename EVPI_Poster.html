<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="generator" content="pandoc" />
<meta name="viewport" content="width=device-width, initial-scale=1">


<!--
Font-awesome icons ie github or twitter
-->
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/brands.css" integrity="sha384-n9+6/aSqa9lBidZMRCQHTHKJscPq6NW4pCQBiMmHdUCvPN8ZOg2zJJTkC7WIezWv" crossorigin="anonymous">

<!--
Google fonts api stuff
-->



<title>Expected Value of Perfect Information</title>





<style>
@page {
size: 33in 47in;
margin: 0;
padding: 0;
}
body {
margin: 0;
font-size: 45px;
width: 33in;
height: 47in;
padding: 0;
text-align: justify;
font-family: Palatino;
}
.poster_wrap {
width: 33in;
height: 47in;
padding: 0cm;
}
.title_container {
width: 33in;
height: calc(47in * 0.15);
overflow: hidden;
background-color: white;
border: 0 solid #0b4545;
}
.logo_left {
float: left;
width: 10%;
height: 100%;
background-color: white;
display: flex;
align-items: center;
justify-content: center;
}
.logo_right {
float: right;
width: 10%;
height: 100%;
background-color: white;
display: flex;
align-items: center;
justify-content: center;
}
.poster_title {
text-align: center;
position: relative;
float: left;
width: 80%;
height: 100%;
color: black;
top: 50%;
transform: translateY(-50%);
-webkit-transform: translateY(-50%);
}
#title {
font-family: Palatino;
}
/* unvisited link */
a:link {
color: #cc0000;
}
.mybreak {
  break-before: column;
}
/* visited link */
a:visited {
color: #cc0000;
}

/* mouse over link */
a:hover {
color: #cc0000;
}

/* selected link */
a:active {
color: #cc0000;
}
.poster_body {
-webkit-column-count: 2; /* Chrome, Safari, Opera */
-moz-column-count: 2; /* Firefox */
column-count: 2;
-webkit-column-fill: auto;
-moz-column-fill: auto;
column-fill: auto;
-webkit-column-rule-width: 1mm;
-moz-column-rule-width: 1mm;
column-rule-width: 1mm;
-webkit-column-rule-style: dashed;
-moz-column-rule-style: dashed;
column-rule-style: dashed;
-webkit-column-rule-color: white;
-moz-column-rule-color: white;
column-rule-color: white;
column-gap: 1em;
padding-left: 0.5em;
padding-right: 0.5em;
height: 100%;
color: #000000
background-color: #ffffff;
}
.poster_title h1 {
font-size: 75pt;
margin: 0;
border: 0;
font-weight: normal;
}
.poster_body_wrap{
width: calc(33in + 0 + 0);
height: calc(47in * 0.83);
padding-top: calc(47in * 0.005);
padding-bottom: calc(47in * 0.01);
background-color: #ffffff;
}
.poster_title h3 {
color: black;
font-size: 50pt;
margin: 0;
border: 0;
font-weight: normal;
}
.poster_title h3 > sup {
  font-size: 35pt;
  margin-left: 0.02em;
}
.poster_title h5 {
color: black;
font-size: 35pt;
margin: 0;
border: 0;
font-weight: normal;
}
img {
margin-top: 2cm;
margin-bottom: 0;
}
.section {
  padding: 0.2em;
}
.poster_body h1 {
text-align: center;
color: black;
font-size: 65pt;
border: 2mm solid white;
background-color: white;
border-radius: 4mm 0mm;
margin-top: 2mm;
margin-bottom: 2mm;
font-weight: normal;
}
.poster_body h2 {
color: #000000;
font-size: 40pt;
padding-left: 4mm;
font-weight: normal;
}
.span {
width: 200%;
}
/* center align leaflet map,
from https://stackoverflow.com/questions/52112119/center-leaflet-in-a-rmarkdown-document */
.html-widget {
margin: auto;
position: sticky;
margin-top: 2cm;
margin-bottom: 2cm;
}
.leaflet.html-widget.html-widget-static-bound.leaflet-container.leaflet-touch.leaflet-fade-anim.leaflet-grab.leaflet-touch-drag.leaflet-touch-zoom {
position: sticky;
width: 100%;
}
pre.sourceCode.r {
background-color: #dddddd40;
border-radius: 4mm;
padding: 4mm;
width: 75%;
/* align-items: center; */
margin: auto;
padding-left: 2cm;
}
code.sourceCode.r{
background-color: transparent;
font-size: 20pt;
border-radius: 2mm;
}
.caption {
font-size: 25pt;
}
.table caption {
font-size: 25pt;
padding-bottom: 3mm;

}
code {
font-size: 1em;
font-family: monospace;
background-color: #00808024;
color: white;
padding: 1.2mm;
border-radius: 2mm;
}
.poster_title code {
font-size: 1em;
}
table {
font-size: 40px;
margin: auto;
border-top: 3px solid #666;
border-bottom: 3px solid #666;
}
table thead th {
border-bottom: 3px solid #ddd;
}
td {
padding: 8px;
}
th {
padding: 15px;
}
caption {
margin-bottom: 10px;
}
.poster_body p {
margin-right: 4mm;
margin-left: 4mm;
margin-top: 6mm;
margin-bottom: 10mm;
}
.poster_body ol {
margin-right: 4mm;
margin-left: 4mm;
}
#ul {
margin-right: 4mm;
margin-left: 4mm;
}
.references p {
font-size: 20pt;
}
.orcid img {
  width: 1em;
}
</style>
</head>
<body>


<div class="poster_wrap">
<div class="title_container">
<!-- Left Logo  -->
<div class="logo_left">
<img src= 'images/INRES_Logo.png' style="width: 80%">
</div>
<!-- Poster Title -->
<div class= "poster_title">
<h1 id="title">Expected Value of Perfect Information</h1>
<h3 id="author">Katja Schiffers<sup>1, <a class="orcid" href="https://orcid.org/0000-0003-2559-6579"><img src="https://raw.githubusercontent.com/brentthorne/posterdown/master/images/orcid.jpg"></a></sup>, Cory Whitney<sup>1, <a class="orcid" href="https://orcid.org/0000-0003-4988-4583"><img src="https://raw.githubusercontent.com/brentthorne/posterdown/master/images/orcid.jpg"></a></sup>, Eike Luedeling<sup>1, <a class="orcid" href="https://orcid.org/0000-0002-7316-3631"><img src="https://raw.githubusercontent.com/brentthorne/posterdown/master/images/orcid.jpg"></a></sup></h3><br>
<h5 id="affiliation"><sup>1</sup> INRES Horticultural Sciences, University of Bonn <br /> Auf dem Hügel 6, 53121 Bonn, Germany</h5>
</div>
<!-- Right Logo  -->
<div class="logo_right">
<img src=images/Uni_Bonn_Picture.png style="width: 80%">
</div>
</div>

<div class='poster_body_wrap'>
<div class='poster_body'>
<!-- we are using the package posterdown. look there for more templates -->
<!-- Spelling -->
<!-- The ABC √ option (upper right on the Rmarkdown console)-->
<!-- Grammar -->
<!-- devtools::install_github("ropenscilabs/gramr") -->
<!-- run_grammar_checker("EVPI_Poster.rmd”) -->
<!-- Print pdf -->
<!-- rmarkdown::render("EVPI_Poster.Rmd", output_format = "pdf_document") -->
<div id="what-is-the-evpi" class="section level1">
<h1>What is the EVPI?</h1>
<p>The expected value of perfect information (EVPI) is a concept developed in decision analysis. It quantifies the potential gain in the units of an output variable of a projection model given accurate knowledge on the value a tested input variable will take. EVPI can help identify those variables for which more information would maximize the model output<span class="citation"><sup>1</sup></span>. When the output variable is monetary, the EVPI can be interpreted as the highest price that decision makers should be willing to pay for perfect information<span class="citation"><sup>2</sup></span>.</p>
<p>EVPI is calculated as the difference between the expected value of the outcome variable <span class="math inline">\(EV\)</span> given accurate knowledge on the value the tested input variable will take (perfect information - <span class="math inline">\(PI\)</span>) and the expected maximum value (<span class="math inline">\(EMV\)</span>) of the outcome variable given only knowledge about the probability distribution of the input variable (imperfect knowledge <span class="math inline">\(II\)</span>)<span class="citation"><sup>3</sup></span>.
<span class="math display">\[
EVPI = EV|PI - EMV
\]</span>
Note that the imperfect information is defined as exact knowledge on the probability distribution of the input variable. It is not meant to capture knowledge uncertainty about the true value of the variable.</p>
</div>
<div id="discrete-probability-example" class="section level1">
<h1>Discrete probability example</h1>
<p>Calculating <span class="math inline">\(EVPI\)</span> with discrete probability distributions is relatively straightforward. We use the example of investment in the stock market vs. deposits (bonds):</p>
<center>
<div class="figure">
<img src="images/stock_market_example.jpg" alt="Example of investment in the stock market vs. deposits (bonds)" />
<p class="caption">Example of investment in the stock market vs. deposits (bonds)</p>
</div>
</center>
<p>The expected value of deposit investment <span class="math inline">\(Expdeposit\)</span> is calculated as the probability of different states of the economy (x-axis) times the expected loss or gain in each condition (y-axis):
<span class="math display">\[
Expdeposit : 0.2 \cdot 500 + 0.3 \cdot 500 
        + 0.5 \cdot 500         = 500 
\]</span>
Likewise, expected value of stock investment <span class="math inline">\(Expstock\)</span> is the probability of each possible state of the economy (x-axis) times the expected losses or gains (y-axis):
<span class="math display">\[ Expstock:   0.2 \cdot -800 + 0.3 \cdot 600
        + 0.5 \cdot 1500        = 680 \]</span></p>
<p>Because <span class="math inline">\(Expstock\)</span> is the more likely decision to result in a gain it is referred to as the Expected Maximum Value <span class="math inline">\(EMV\)</span>.</p>
<p>The expected value of the decision <em>given</em> perfect information <span class="math inline">\(EV|PI\)</span> prior to decision is calculated as the sum of all the best options (always making the more gainful choice) multiples by the respective probabilities:
<span class="math display">\[
EV|PI :     0.2 \cdot 500 + 0.3 \cdot 600 
        + 0.5 \cdot 1500        = 1030
\]</span></p>
<p>The Expected Value of Perfect Information <span class="math inline">\(EVPI\)</span> is then calculated as the difference between the decision given perfect information <span class="math inline">\(EV|PI\)</span> and the the Expected Maximum Value <span class="math inline">\(EMV\)</span>.
<span class="math display">\[
EVPI :      1030 – 680      = 350
\]</span>
Knowing the direction the market will go (having perfect information) before making our decision would help us take the best derision here. We should be willing to pay up to 350€ for perfect information on the future state of the economy.</p>
</div>
<div id="continuous-probability-example" class="section level1">
<h1>Continuous probability example</h1>
<p>In the following example of an agricultural decision to apply fertilizer, we assume that the nutrient content of the soil will follow a normal distribution and that the additional gain in yield under the decision not to apply fertilizer will remain constant (<span style="color:green">green line</span>). Therefore the expected gain for the decision to not apply fertilizer is simply zero.</p>
<p>Further we assume when applying fertilizer the effect on additional gain is negatively correlated with the nutrient content of the soil and becomes negative at a certain level of nutrients and causes losses in yield due to toxic effects (<span style="color:red">dashed red line</span>).</p>
<p>To calculate the expected gain in yield when applying fertilizer, we multiply the dashed red line with the normal density distribution (analog to multiplying the gains and losses with the probability of the market going in the respective directions in the previous example). For the resulting weighted response (<span style="color:red">red line</span>) we add up the areas under the curve: <span class="math inline">\(A-B\)</span>. As the positive part <span class="math inline">\(A\)</span> is greater than the negative part <span class="math inline">\(B\)</span>, the expected value of applying fertilizer has a small positive value. Therefore, applying fertilizer is the decision with the expected maximum value <span class="math inline">\(EMV\)</span> under imperfect knowledge.</p>
<center>
<div class="figure">
<img src="images/EVPI_figure2.jpg" alt="Example of an agricultural decision to apply fertilizer" />
<p class="caption">Example of an agricultural decision to apply fertilizer</p>
</div>
</center>
<p>The expected value given perfect information <span class="math inline">\(EV|PI\)</span> is equal to <span class="math inline">\(A\)</span>, because up to the nutrient content, where the line intersects zero, the best decision is to apply fertilizer, but for higher nutrient contents no fertilizer should be added. The <span class="math inline">\(EVPI\)</span> is then again calculated as the difference between <span class="math inline">\(EV|PI\)</span> and <span class="math inline">\(EMV\)</span>.</p>
<p><span class="math display">\[
EVPI :      A – (A - B) = B
\]</span></p>
</div>
<div id="calculate-evpi-in-r" class="section level1">
<h1>Calculate EVPI in R</h1>
<p>The <em>empirical_EVPI()</em> function in R’s decisionSupport library<span class="citation"><sup>4</sup></span> calculates EVPI for a simple model with continuous data like the one above. The <em>multi_EVPI()</em> function does the same with more complex models with multiple variables.</p>
</div>
<div id="references" class="section level1 unnumbered">
<h1>References</h1>
<div id="refs" class="references">
<div id="ref-lanzanova2019">
<p>1. Lanzanova, D., Whitney, C., Shepherd, K. &amp; Luedeling, E. Improving development efficiency through decision analysis: Reservoir protection in Burkina Faso. <em>Environmental Modelling &amp; Software</em> <strong>115</strong>, 164–175 (2019).</p>
</div>
<div id="ref-hubbard2014">
<p>2. Hubbard, D. W. <em>How To Measure Anything: Finding the Value of Intangibles in Business</em>. vol. Second Edition (John Wiley &amp; Sons, 2014).</p>
</div>
<div id="ref-Strong2014">
<p>3. Strong, M., Oakley, J. E. &amp; Brennan, A. Estimating multiparameter partial expected value of perfect information from a probabilistic sensitivity analysis sample: A nonparametric regression approach. <em>Med. Decis. Making</em> <strong>34</strong>, 311–26 (2014).</p>
</div>
<div id="ref-decisionSupport2017">
<p>4. Luedeling, E., Goehring, L. &amp; Schiffers, K. <em>DecisionSupport: Quantitative support of decision making under uncertainty</em>. (2019).</p>
</div>
</div>
</div>
</div>
</div>

</div>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
var script = document.createElement("script");
script.type = "text/javascript";
var src = "true";
if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
if (location.protocol !== "file:" && /^https?:/.test(src))
src = src.replace(/^https?:/, '');
script.src = src;
document.getElementsByTagName("head")[0].appendChild(script);
})();
</script>


</body>
</html>
